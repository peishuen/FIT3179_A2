{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://raw.githubusercontent.com/peishuen/FIT3179_A2/refs/heads/main/idioms/line_chart/unemployment_monthly.csv",
    "format": {"type": "csv"}
  },
  "title": {
    "text": "National Unemployment Rate (2017-2023)"
  },

  "transform": [
    {
      "calculate": "format(datum.unemployment_rate, '.1f') + '%'",
      "as": "unemployment_rate_label"
    }
  ],
  "vconcat": [
      {
        "width": 700,
        "height": 300,
        "mark": {
          "type": "line",
          "color": "#68B0A5",
          "strokeWidth": 3
        },
        "encoding": {
          "x": {
            "field": "date",
            "type": "temporal",
            "title": "Date",
            "timeUnit": "yearmonth",
            "scale": {"domain": {"param": "brush"}},
            "axis": {"format": "%b %Y", "labelAngle": -45}
          },
          "y": {
            "field": "unemployment_rate",
            "type": "quantitative",
            "title": "Unemployment Rate (%)"
          }, 
          "tooltip": [
              {
                "field": "date",
                "type": "temporal",
                "timeUnit": "yearmonth",
                "title": "Date",
                "format": "%b %Y"
              },
              {
                "field": "unemployment_rate_label",
                "type": "nominal",
                "title": "Unemployment Rate"
              }
          ]
        }
      }, 

      {
        "width": 700,
        "height": 80,
        "mark": {
          "type": "area",
          "color": "#B2D7D1", "opacity": 0.7
        }, 
        "params": [
          {"name": "brush", "select": {"type": "interval", "encodings": ["x"]}}
        ],
        "encoding": {
          "x": {
            "field": "date",
            "type": "temporal",
            "title": "Year",
            "axis": {
              "grid": false, 
              "labelAngle": 0, 
              "tickCount": {"interval": "year", "step": 1}
            }
          }, 
          "y": {
            "field": "unemployment_rate",
            "type": "quantitative",
            "title": "Unemployment Rate (%)",
            "axis": {"tickCount": 3, "grid": false}
          }
        }
      }
  ],

  "config": {
    "title": {
      "fontSize": 24, 
      "fontWeight": "bold", 
      "anchor": "middle", 
      "offset": 20,
      "color": "#5c5c5c"
    },
    "axis": {
      "titleFontSize": 12.5, 
      "titlePadding": 18, 
      "titleFontWeight": 600, 
      "titleColor": "#858585",
      "labelFontSize": 10, 
      "labelFontWeight": 200,
      "labelColor": "#858585"
    },
    "text": {
      "fontWeight": "lighter",
      "fontSize": 12.5,
      "color": "#858585"
    }
  }    
}